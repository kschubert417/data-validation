-- CREATING TABLES FOR DATABASE
DROP TABLE IF EXISTS MODULE;
CREATE TABLE MODULE(
  MODULE_NAME STRING PRIMARY KEY, -- Name of module
  DESC        STRING -- Description
);

DROP TABLE IF EXISTS TABLES;
CREATE TABLE TABLES (
    TABLE_NAME     STRING PRIMARY KEY,
    DESCR          STRING,
    REQUIRED       STRING,
    NOTES          STRING,
    UPLOAD_STATUS  STRING,
    CREATE_RELATED STRING,
    OVERWRITE      STRING,
    MODULE_NAME    TEXT NOT NULL REFERENCES MODULE (MODULE_NAME)
);


DROP TABLE IF EXISTS MASTER_INFO;
CREATE TABLE MASTER_INFO (
    NAME       STRING PRIMARY KEY,
    DESCR      STRING,
    FIELD_TYPE STRING
);

DROP TABLE IF EXISTS COLUMNS;
CREATE TABLE COLUMNS (
    COLUMN_NAME       STRING PRIMARY KEY,
    DESCR             STRING,
    REQUIRED          STRING,
    FIELDTYPE         STRING,
    LENGTH            INTEGER,
    SOURCE_SYSTEM_MAP STRING,
    NOTES             STRING,
    TABLE_NAME        STRING NOT NULL REFERENCES TABLES (TABLE_NAME)
);

DROP TABLE IF EXISTS DATA_MANIPULATION;
CREATE TABLE DATA_MANIPULATION (
    [INDEX]          INTEGER PRIMARY KEY AUTOINCREMENT,
    PRE_PROCES       STRING,
    EXTRACTION_RULES STRING,
    TABLE_NAME       STRING NOT NULL REFERENCES TABLES (TABLE_NAME),
    COLUMN_NAME      STRING NOT NULL REFERENCES COLUMNS (COLUMN_NAME) 
);
